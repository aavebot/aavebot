"use strict";var _statcounter=function(_1){var _2={EventType:{DomContentLoaded:0,Load:1,FullSnapshot:2,IncrementalSnapshot:3,Meta:4,Custom:5},IncrementalSource:{Mutation:0,MouseMove:1,MouseInteraction:2,Scroll:3,ViewportResize:4,Input:5,TouchMove:6,MediaInteraction:7,StyleSheetRule:8},MouseInteractions:{MouseUp:0,MouseDown:1,Click:2,ContextMenu:3,DblClick:4,Focus:5,Blur:6,TouchStart:7,TouchMove_Departed:8,TouchEnd:9}};try{var _3=_statcounter.get_top_window()}catch(ignore){var _3=window.top}var _4=_3.document;var _5={};if(typeof _1==="undefined"){}else{if(_1.start_recording){return _1}else{if(_1.record_pageview){_5=_1}else{_5._pageview_tags_in=_1}}}var _6;var _7=[];var _8=false;var _9=false;var _a=1000;var _b=false;var _c=false;var _d=false;var _e=false;var _f=false;function get_rrweb_config(_10){var _11=true;if(_statcounter.getSessionConfig("sc_unmask_"+_10)==1){_11=false}return {emit:rrwebEmission,maskAllInputs:_11,slimDOMOptions:"all",blockClass:"session-replay-block",}}var _12={};var _13={};var _14={};var _15={};var _16={};var _17=1;var _18=Math.pow(2,23)/8;var _19=Math.pow(2,19)/8;var _1a=false;var _1b="on";_5.start_recording=function(_1c,_1d){_1b=_1d;if(_1c!==undefined){if(_1a!==false){if(_1a===_1c){}else{console.warning("Blocked recording of project p"+_1c+" as Statcounter is already recording this page as part of p"+_1a+" (recording multiple projects at the same time is not supported)")}return}_1a=_1c}else{if(typeof (sc_project)==="undefined"){return}else{_1a=sc_project}}_statcounter._rrwebRecord(get_rrweb_config(_1a));setupWebsocket()};function send(_1e){if(_9){return}try{if(!_b){_1e["project"]=_1a,_1e["visitor"]=_c.replace(/^\./,""),_1e["session"]=_d}var msg=JSON.stringify(_1e);if(msg.length>_18){var sig=(Math.random()*16777215<<0).toString(16);var _21=Math.ceil(msg.length/_18);var _22=Math.ceil(msg.length/_21);for(var i=0;i<_21;i++){var _24=msg.substring(_22*i,_22*(i+1));_6.send("part:"+sig+":"+(i+1)+":"+_21+":"+_24)}}else{_6.send(msg)}_b=true;_a=1000}catch(e){if(_7===false){_7=[]}_7.push(_1e);_b=false}}function retryWebsocket(){if(_8!==false){return}if(_9){return}if(_6&&_6.readyState===WebSocket.OPEN){return}if(_7===false){_7=[]}_6=null;setTimeout(setupWebsocket,_a);_a*=1.5}function setupWebsocket(){if(_9){return}try{if(_1b=="dev"||_1b.indexOf("wsdev")!==-1){_6=new WebSocket("wss://dev.statcounter.io/")}else{_6=new WebSocket("wss://statcounter.io/")}}catch(e){retryWebsocket();return}_b=false;_6.onclose=retryWebsocket;_6.onopen=function(){_6.onmessage=handleServerMessage;while(_7.length){send(_7.shift())}_7=false;_8=false}}function handleServerMessage(m){var j=JSON.parse(m.data);var _27=false;if(j.payload&&j.payload.required){_27=j.payload["required"]}else{if(j.required){_27=j["required"]}}if(j.type=="rrweb-DOM-request"){var _28=[];var _29=0;for(var i=0;i<_27.length;i++){var _2b=_27[i];var _2c=[_2b,_13[_2b],_12[_2b]];if(_14[_2b]>_18/2){sendEvent("DOM-response",{"content":[_2c]})}else{_28.push(_2c);_29+=_14[_2b]}if(_29>_18/2||i==_27.length-1){if(_28.length){sendEvent("DOM-response",{"content":_28})}_29=0;_28=[]}}_12={};_13={};_14={}}if(j.type=="hangup"){_9=true;turn_off_and_clean_up()}}function turn_off_and_clean_up(){if(_statcounter._rrwebRecord){_statcounter._rrwebRecord.stop();delete _statcounter._rrwebRecord}if(_2d){clearTimeout(_2d)}_7=[];if(_6){_6.close()}}function sendEvent(_2e,e){if(_9){return}if(_2e===false){}else{if(e["type"]!==undefined){if(!(e["type"]==2&&_2e=="pageload")){e["dupe_type"]=_2e}}else{e["type"]=_2e}}if(_d===false){_d=_statcounter.get_session_num(_1a);_c=_statcounter.get_visitor_id();_e=_statcounter.get_tab_session()}e["tab"]=_e;if(_8=="reactivate"&&e.type==4){e.data.referrer="session-increment";if(_7.length){e.timestamp=_7[0].timestamp-2}_7.unshift(e)}else{if(_8=="reactivate"&&_2e=="pageload"&&_7[0].type==4){if(_7.length>1){e.timestamp=_7[1].timestamp-1}_7.splice(1,0,e);_8="sending";setupWebsocket()}else{if(_7===false&&_8===false){send(e)}else{if(_7===false){_7=[]}_7.push(e)}}}return e}function log(_30){console.log(JSON.stringify(_30,null,4))}function murmurhash3_32_gc(key,_32){var _33,_34,h1,h1b,c1,c1b,c2,c2b,k1,i;_33=key.length&3;_34=key.length-_33;h1=_32;c1=3432918353;c2=461845907;i=0;while(i<_34){k1=((key.charCodeAt(i)&255))|((key.charCodeAt(++i)&255)<<8)|((key.charCodeAt(++i)&255)<<16)|((key.charCodeAt(++i)&255)<<24);++i;k1=((((k1&65535)*c1)+((((k1>>>16)*c1)&65535)<<16)))&4294967295;k1=(k1<<15)|(k1>>>17);k1=((((k1&65535)*c2)+((((k1>>>16)*c2)&65535)<<16)))&4294967295;h1^=k1;h1=(h1<<13)|(h1>>>19);h1b=((((h1&65535)*5)+((((h1>>>16)*5)&65535)<<16)))&4294967295;h1=(((h1b&65535)+27492)+((((h1b>>>16)+58964)&65535)<<16))}k1=0;switch(_33){case 3:k1^=(key.charCodeAt(i+2)&255)<<16;case 2:k1^=(key.charCodeAt(i+1)&255)<<8;case 1:k1^=(key.charCodeAt(i)&255);k1=(((k1&65535)*c1)+((((k1>>>16)*c1)&65535)<<16))&4294967295;k1=(k1<<15)|(k1>>>17);k1=(((k1&65535)*c2)+((((k1>>>16)*c2)&65535)<<16))&4294967295;h1^=k1}h1^=key.length;h1^=h1>>>16;h1=(((h1&65535)*2246822507)+((((h1>>>16)*2246822507)&65535)<<16))&4294967295;h1^=h1>>>13;h1=((((h1&65535)*3266489909)+((((h1>>>16)*3266489909)&65535)<<16)))&4294967295;h1^=h1>>>16;return h1>>>0}function fragmentRrwebContent(_3d,_3e,_3f){if(_3d["id"]){if(_3d["id"]==_17){delete _3d["id"];_17++}else{console.log("error id mismatch");_3d["unexpected_id"]=true;_3d["visitor"]=_c;_3d["session"]=_d;_3d["recorder_version"]="7fd1e0-ccc191de04028a02f3eefcbcc21e35cb7eeabe6b";_3d["id_class_counts"]=_3f!==undefined;_3d["dupe_ids"]=JSON.stringify(_16);_17=parseInt(_3d["id"])+1}}else{if(_3f===undefined){_3d["missing_id"]=true}}if(_3d.attributes){_3d.attributes=Object.keys(_3d.attributes).sort().reduce(function(_40,key){_40[key]=_3d.attributes[key];return _40},{})}if(_3d.childNodes&&Object.keys(_3d.childNodes).length==0&&_3d.type==2){delete _3d["childNodes"]}else{if(_3d.childNodes){for(var i=0;i<_3d.childNodes.length;i++){var cn=_3d.childNodes[i];if(typeof cn!=="string"){_3d.childNodes[i]=fragmentRrwebContent(cn,_3d,_3f)}}}}var _44=null;if(_3d.attributes&&Object.keys(_3d.attributes).length==0&&_3d.type==2){delete _3d["attributes"]}else{if(_3d.attributes){if(_3d.attributes["id"]){_44="#"+_3d.attributes["id"];if(_44.match(/^#(block-)?yui_/)){var _45=_44.split("_");if(_45.length>2&&_45[_45.length-2].match(/^[0-9]{13}$/)){_44=_45.slice(0,_45.length-2).join("_")+"_"+_45[_45.length-1]}}}else{if(_3f!==undefined&&_3d.attributes["class"]){var _46=_3d.attributes["class"].split(" ");for(var i=0;i<_46.length;i++){if(_3f[_46[i]]==1){_44="."+_46[i];break}}}}}}if(_3d.type==2&&_3d.tagName){delete _3d["type"]}if(_44&&_12[_44]!==undefined&&JSON.stringify(_12[_44])!=JSON.stringify(_3d)){for(var i=0;i<_15[_44].length;i++){for(var j=0;j<_15[_44][i].childNodes.length;j++){if(_15[_44][i].childNodes[j]==_44){_15[_44][i].childNodes[j]=_12[_44]}}}delete _12[_44];_16[_44]=true}var _48=false;if(_44&&_16[_44]===undefined){if(_12[_44]!==undefined&&JSON.stringify(_12[_44])==JSON.stringify(_3d)){_15[_44].push(_3e)}else{_15[_44]=[_3e]}_48=_44}else{if(_3d.tagName=="head"){_48=_3d.tagName+"://"+_4.location.host+_4.location.pathname}else{if(_3d.tagName=="body"){_48=_3d.tagName}else{if(_3d.attributes&&_3d.attributes["_cssText"]&&_3d.attributes["_originalHref"]){_48=_3d.attributes["_originalHref"]}else{if(_3d.tagName=="style"&&_3e.tagName=="head"){if(!_3e._style_fragment_nth){_3e._style_fragment_nth=1}_48="head>style:nth-of-type("+(_3e._style_fragment_nth++)+")"}}}}}if(_48){if(_3f===undefined&&_3d.childNodes&&_3d.childNodes.length&&JSON.stringify(_3d).length>_19){_3d=refragmentRrwebContentByClass(_3d,_3e)}_12[_48]=_3d;return _48}else{if(_3d.type==3&&_3d.textContent&&Object.keys(_3d).length==2){return _3d.textContent}else{return _3d}}}function refragmentRrwebContentByClass(_49,_4a){var _4b={};countClasses(_49,_4b);for(var i=0;i<_49.childNodes.length;i++){var cn=_49.childNodes[i];if(typeof cn!=="string"){_49.childNodes[i]=fragmentRrwebContent(cn,_49,_4b)}}return _49}function countClasses(_4e,_4f){for(var i=0;i<_4e.childNodes.length;i++){var cn=_4e.childNodes[i];if(cn.attributes&&cn.attributes["class"]){var _52=cn.attributes["class"].split(/\s+/);for(var j=0;j<_52.length;j++){if(_4f[_52[j]]===undefined){_4f[_52[j]]=_4.getElementsByClassName(_52[j]).length}}}if(cn.childNodes&&cn.childNodes.length){countClasses(cn,_4f)}}}var _2d=false;var _54=(new Date()).getTime()/1000;var _55=(new Date()).getTime()/1000;function rrwebEmission(_56){var _57=_56.type==_2.EventType.IncrementalSnapshot&&(_56.data.source==_2.IncrementalSource.MouseMove||(_56.data.source==_2.IncrementalSource.MouseInteraction&&(_56.data.type==_2.MouseInteractions.MouseDown||_56.data.type==_2.MouseInteractions.Click||_56.data.type==_2.MouseInteractions.DblClick||_56.data.type==_2.MouseInteractions.TouchStart))||_56.data.source==_2.IncrementalSource.Scroll||_56.data.source==_2.IncrementalSource.Input||_56.data.source==_2.IncrementalSource.TouchMove);var now=(new Date()).getTime()/1000;if(_57&&_8===false){if(now-_55>120){var _59=_statcounter.update_cookie(_1a);if(_59["session_incremented"]){_d=_statcounter.get_session_num(_1a);_8=true;if(_6){_6.close()}}_55=now}}if(_57){_54=now}else{if(now-_54>1800){_7=[];_54=now}}var _5a=_56.type==_2.EventType.IncrementalSnapshot&&_56.data.source==_2.IncrementalSource.Mutation;if(_8===true){if(_57){var _5b="?sc_project="+_1a+"&u1="+_c+"&sn="+_d;_statcounter.get_config(_5b,function(_5c){if(_5c["visitor_recording"]!==0){_8="reactivate";_statcounter._rrwebRecord.stop();_statcounter._rrwebRecord(get_rrweb_config(_1a))}else{turn_off_and_clean_up()}});_8="pending"}else{return}}if(!_5a){if(_2d){clearTimeout(_2d)}_2d=setTimeout(function(){if(_statcounter._rrwebRecord){_statcounter._rrwebRecord.freezePage()}},25000)}if(_56.type!==2){if(_56.type===4){_56.data.referrer=_statcounter.get_referrer();try{_56.data.config=JSON.parse(sessionStorage.getItem("statcounter_config"));_56.data.raw_cookie=_4.cookie;_56.data.counter_version=_statcounter.version();_56.data.recorder_version="7fd1e0-ccc191de04028a02f3eefcbcc21e35cb7eeabe6b"}catch(e){}}if(_5a){for(var k in {adds:1,removes:1,attributes:1,texts:1}){if(!_56.data[k].length){delete _56.data[k]}}delete _56.data["source"]}_56["snapshot"]=_f;sendEvent(false,_56);return}if(false){var _5e=murmurhash3_32_gc(JSON.stringify(_56.data.node));var _5f=_4.location.host+_4.location.pathname;_12["(full)"+_5f]=_56.data.node;_13["(full)"+_5f]=_5e}var _56=JSON.parse(JSON.stringify(_56));_17=1;_56.data.node=fragmentRrwebContent(_56.data.node);for(var _60 in _12){var _61=_12[_60];if(_60.substring(0,1)=="#"&&_61.attributes&&_61.attributes.id){delete _61.attributes["id"];if(Object.keys(_61.attributes).length==0){delete _61["attributes"]}}if(_61["_style_fragment_nth"]){delete _61["_style_fragment_nth"]}var _62=JSON.stringify(_61);var _5e=murmurhash3_32_gc(_62);_13[_60]=_5e;_14[_60]=_62.length}_15={};_16={};var _63=[];for(var _64 in _12){_63.push([_64,_13[_64]])}_56["key-sig-list"]=_63;if(_statcounter._generate_uuid){_f=_statcounter._generate_uuid(8)}else{_f="x"+Math.round(Math.random()*900000+100000)}_56["snapshot"]=_f;sendEvent("pageload",_56)}_5._add_recording_event=function(_65,_66){if(_statcounter._rrwebRecord){_statcounter._rrwebRecord.addCustomEvent(_65,_66)}};var _67,_68;if(typeof _4.hidden!=="undefined"){_67="hidden";_68="visibilitychange"}else{if(typeof _4.msHidden!=="undefined"){_67="msHidden";_68="msvisibilitychange"}else{if(typeof _4.webkitHidden!=="undefined"){_67="webkitHidden";_68="webkitvisibilitychange"}}}function handleVisibilityChange(){if(_statcounter._rrwebRecord){if(_4[_67]){_5._add_recording_event("window-hidden");_statcounter._rrwebRecord.freezePage()}else{_5._add_recording_event("window-visible")}}}if(typeof _4.addEventListener==="undefined"||_67===undefined){}else{_4.addEventListener(_68,handleVisibilityChange,false)}return _5}(_statcounter);
// v: ccc191de04028a02f3eefcbcc21e35cb7eeabe6b
_statcounter._rrwebRecord=function(){"use strict";
var e,t=function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.apply(this,arguments)};function n(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function r(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}function o(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e}function a(e){var t,n=null===(t=e)||void 0===t?void 0:t.host;return Boolean(n&&n.shadowRoot&&n.shadowRoot===e)}function i(e){var t=e.maskInputOptions,n=e.tagName,r=e.type,o=e.value,a=e.maskInputFn,i=o||"";return(t[n.toLowerCase()]||t[r])&&(i=a?a(i):"*".repeat(i.length)),i}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(e||(e={}));var s=1,l=RegExp("[^a-z0-9-_:]"),u=-2;function c(){return s++}function d(e){try{var t=e.rules||e.cssRules;return t?Array.from(t).map(p).join(""):null}catch(e){return null}}function p(e){var t=e.cssText;if(function(e){return"styleSheet"in e}(e))try{t=d(e.styleSheet)||t}catch(e){}return t}var f=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,m=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/,h=/^(data:)([^,]*),(.*)/i;function v(e,t){return(e||"").replace(f,(function(e,n,r,o,a,i){var s,l=r||a||i,u=n||o||"";if(!l)return e;if(!m.test(l))return"url("+u+l+u+")";if(h.test(l))return"url("+u+l+u+")";if("/"===l[0])return"url("+u+(((s=t).indexOf("//")>-1?s.split("/").slice(0,3).join("/"):s.split("/")[0]).split("?")[0]+l)+u+")";var c=t.split("/"),d=l.split("/");c.pop();for(var p=0,f=d;p<f.length;p++){var v=f[p];"."!==v&&(".."===v?c.pop():c.push(v))}return"url("+u+c.join("/")+u+")"}))}var y,g,S,b,C,k=/^[^ \t\n\r\u000c]+/,I=/^[, \t\n\r\u000c]+/;function T(e,t){if(!t||""===t.trim())return t;var n=e.createElement("a");return n.href=t,n.href}function x(){var e=document.createElement("a");return e.href="",e.href}function w(e,t,n,r){return"src"===n||("href"===n||"xlink:href"===n)&&r?T(e,r):"background"!==n||!r||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n&&r?function(e,t){if(""===t.trim())return t;var n=0;function r(e){var r,o=e.exec(t.substring(n));return o?(r=o[0],n+=r.length,r):""}for(var o=[];r(I),!(n>=t.length);){var a=r(k);if(","===a.slice(-1))a=T(e,a.substring(0,a.length-1)),o.push(a);else{var i="";a=T(e,a);for(var s=!1;;){var l=t.charAt(n);if(""===l){o.push((a+i).trim());break}if(s)")"===l&&(s=!1);else{if(","===l){n+=1,o.push((a+i).trim());break}"("===l&&(s=!0)}i+=l,n+=1}}}return o.join(", ")}(e,r):"style"===n&&r?v(r,x()):r:T(e,r)}function E(e,t,n){if(!e)return!1;if(e.nodeType===e.ELEMENT_NODE){if("string"==typeof t){if(e.classList.contains(t))return!0}else e.classList.forEach((function(e){if(t.test(e))return!0}));return!(!n||!e.matches(n))||E(e.parentNode,t,n)}return e.nodeType,e.TEXT_NODE,E(e.parentNode,t,n)}function M(t,n){var r,o,a=n.doc,s=n.blockClass,u=n.blockSelector,c=n.maskTextClass,p=n.maskTextSelector,f=n.inlineStylesheet,m=n.maskInputOptions,h=void 0===m?{}:m,y=n.maskTextFn,g=n.maskInputFn,S=n.recordCanvas,b=n.keepIframeSrcFn;if(a.__sn){var C=a.__sn.id;r=1===C?void 0:C}switch(t.nodeType){case t.DOCUMENT_NODE:return"CSS1Compat"!==t.compatMode?{type:e.Document,childNodes:[],compatMode:t.compatMode,rootId:r}:{type:e.Document,childNodes:[],rootId:r};case t.DOCUMENT_TYPE_NODE:return{type:e.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId,rootId:r};case t.ELEMENT_NODE:for(var k=function(e,t,n){if("string"==typeof t){if(e.classList.contains(t))return!0}else for(var r=0;r<e.classList.length;r++){var o=e.classList[r];if(t.test(o))return!0}return!!n&&e.matches(n)}(t,s,u),I=function(e){if(e instanceof HTMLFormElement)return"form";var t=e.tagName.toLowerCase().trim();return l.test(t)?"div":t}(t),T={},M=0,N=Array.from(t.attributes);M<N.length;M++){var O=N[M],D=O.name,R=O.value;T[D]=w(a,I,D,R)}if("link"===I&&f){var _,F=Array.from(a.styleSheets).find((function(e){return e.href===t.href}));(_=d(F))&&(delete T.rel,T._originalHref=T.href,delete T.href,T._cssText=v(_,F.href))}if("style"===I&&t.sheet&&!(t.innerText||t.textContent||"").trim().length)(_=d(t.sheet))&&(T._cssText=v(_,x()));if("input"===I||"textarea"===I||"select"===I){R=t.value;"radio"!==T.type&&"checkbox"!==T.type&&"submit"!==T.type&&"button"!==T.type&&R?T.value=i({type:T.type,tagName:I,value:R,maskInputOptions:h,maskInputFn:g}):t.checked&&(T.checked=t.checked)}if("option"===I&&(t.selected?T.selected=!0:delete T.selected),"canvas"===I&&S&&(T.rr_dataURL=t.toDataURL()),"audio"!==I&&"video"!==I||(T.rr_mediaState=t.paused?"paused":"played",T.rr_mediaCurrentTime=t.currentTime),t.scrollLeft&&(T.rr_scrollLeft=t.scrollLeft),t.scrollTop&&(T.rr_scrollTop=t.scrollTop),k){var L=t.getBoundingClientRect(),P=L.width,A=L.height;T={class:T.class,rr_width:P+"px",rr_height:A+"px"}}return"iframe"!==I||b(T.src)||delete T.src,{type:e.Element,tagName:I,attributes:T,childNodes:[],isSVG:(o=t,"svg"===o.tagName||o instanceof SVGElement||void 0),needBlock:k,rootId:r};case t.TEXT_NODE:var z=t.parentNode&&t.parentNode.tagName,V=t.textContent,W="STYLE"===z||void 0,H="SCRIPT"===z||void 0;return W&&V&&(V=v(V,x())),H&&(V="SCRIPT_PLACEHOLDER"),!W&&!H&&E(t,c,p)&&V&&(V=y?y(V):V.replace(/[\S]/g,"*")),{type:e.Text,textContent:V||"",isStyle:W,rootId:r};case t.CDATA_SECTION_NODE:return{type:e.CDATA,textContent:"",rootId:r};case t.COMMENT_NODE:return{type:e.Comment,textContent:t.textContent||"",rootId:r};default:return!1}}function N(e){return void 0===e?"":e.toLowerCase()}function O(t,n){var r,o=n.doc,i=n.map,s=n.blockClass,l=n.blockSelector,d=n.maskTextClass,p=n.maskTextSelector,f=n.skipChild,m=void 0!==f&&f,h=n.inlineStylesheet,v=void 0===h||h,y=n.maskInputOptions,g=void 0===y?{}:y,S=n.maskTextFn,b=n.maskInputFn,C=n.slimDOMOptions,k=n.recordCanvas,I=void 0!==k&&k,T=n.onSerialize,x=n.onIframeLoad,w=n.iframeLoadTimeout,E=void 0===w?5e3:w,D=n.keepIframeSrcFn,R=void 0===D?function(){return!1}:D,_=n.isFullSnapshot,F=void 0!==_&&_,L=n.preserveWhiteSpace,P=void 0===L||L,A=n.ignoreChildren,z=void 0!==A&&A,V=M(t,{doc:o,blockClass:s,blockSelector:l,maskTextClass:d,maskTextSelector:p,inlineStylesheet:v,maskInputOptions:g,maskTextFn:S,maskInputFn:b,recordCanvas:I,keepIframeSrcFn:R});if(!V)return console.warn(t,"not serialized"),null;"__sn"in t&&!F?r=t.__sn.id:z||function(t,n,r){if(r.comment&&t.type===e.Comment)return!0;if(t.type===e.Element){if(r.script&&("script"===t.tagName||"link"===t.tagName&&"preload"===t.attributes.rel&&"script"===t.attributes.as||"link"===t.tagName&&"prefetch"===t.attributes.rel&&"string"==typeof t.attributes.href&&t.attributes.href.endsWith(".js")))return!0;if(r.headFavicon&&("link"===t.tagName&&"shortcut icon"===t.attributes.rel||"meta"===t.tagName&&(N(t.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===N(t.attributes.name)||"icon"===N(t.attributes.rel)||"apple-touch-icon"===N(t.attributes.rel)||"shortcut icon"===N(t.attributes.rel))))return!0;if("meta"===t.tagName){if(r.headMetaDescKeywords&&N(t.attributes.name).match(/^description|keywords$/))return!0;if(r.headMetaSocial&&(N(t.attributes.property).match(/^(og|twitter|fb):/)||N(t.attributes.name).match(/^(og|twitter):/)||"pinterest"===N(t.attributes.name)))return!0;if(r.headMetaRobots&&("robots"===N(t.attributes.name)||"googlebot"===N(t.attributes.name)||"bingbot"===N(t.attributes.name)))return!0;if(r.headMetaHttpEquiv&&void 0!==t.attributes["http-equiv"])return!0;if(r.headMetaAuthorship&&("author"===N(t.attributes.name)||"generator"===N(t.attributes.name)||"framework"===N(t.attributes.name)||"publisher"===N(t.attributes.name)||"progid"===N(t.attributes.name)||N(t.attributes.property).match(/^article:/)||N(t.attributes.property).match(/^product:/)))return!0;if(r.headMetaVerification&&("google-site-verification"===N(t.attributes.name)||"yandex-verification"===N(t.attributes.name)||"csrf-token"===N(t.attributes.name)||"p:domain_verify"===N(t.attributes.name)||"verify-v1"===N(t.attributes.name)||"verification"===N(t.attributes.name)||"shopify-checkout-api-token"===N(t.attributes.name)))return!0}else if(r.adPlaceholder&&"ins"==t.tagName){var o=Array.from(n.childNodes).filter((function(e){return e.nodeType===e.ELEMENT_NODE}));if(1==o.length&&o[0].id&&"aswift_"===o[0].id.substring(0,7))return t.placeholderClass="rrweb-ad-placeholder",!0}}return!1}(V,t,C)||!P&&V.type===e.Text&&!V.isStyle&&!V.textContent.replace(/^\s+|\s+$/gm,"").length?(z=!0,r=u):r=c();var W=Object.assign(V,{id:r});t.__sn=W,r!==u&&(i[r]=t),T&&T(t);var H=!m;if(W.type===e.Element&&(H=H&&!W.needBlock,delete W.needBlock),(W.type===e.Document||W.type===e.Element)&&H){C.headWhitespace&&V.type===e.Element&&"head"===V.tagName&&(P=!1);for(var j={doc:o,map:i,blockClass:s,blockSelector:l,maskTextClass:d,maskTextSelector:p,skipChild:m,ignoreChildren:z,inlineStylesheet:v,maskInputOptions:g,maskTextFn:S,maskInputFn:b,slimDOMOptions:C,recordCanvas:I,preserveWhiteSpace:P,onSerialize:T,onIframeLoad:x,iframeLoadTimeout:E,keepIframeSrcFn:R,isFullSnapshot:F},B=0,U=Array.from(t.childNodes);B<U.length;B++){(G=O(U[B],j))&&W.childNodes.push(G)}if(function(e){return e.nodeType===e.ELEMENT_NODE}(t)&&t.shadowRoot){W.isShadowHost=!0;for(var X=0,q=Array.from(t.shadowRoot.childNodes);X<q.length;X++){var G;(G=O(q[X],j))&&(G.isShadow=!0,W.childNodes.push(G))}}}if(t.parentNode&&a(t.parentNode)&&(W.isShadow=!0),r===u)return W.type===e.Element&&W.placeholderClass?{type:e.Element,tagName:"div",attributes:{style:"width: "+t.clientWidth+"px;height: "+t.clientHeight+"px;",class:W.placeholderClass},childNodes:[],id:c()}:null;if(W.type===e.Element&&"iframe"===W.tagName){var Y=W.id;!function(e,t,n){var r=e.contentWindow;if(r){var o,a=!1;try{o=r.document.readyState}catch(e){return}if("complete"===o){var i="about:blank";r.location.href===i&&e.src!==i&&""!==e.src?e.addEventListener("load",t):setTimeout(t,0)}else{var s=setTimeout((function(){a||(t(),a=!0)}),n);e.addEventListener("load",(function(){clearTimeout(s),a=!0,t()}))}}}(t,(function(){var e=t.contentDocument;if(e&&x){var n=O(e,{doc:e,map:i,blockClass:s,blockSelector:l,maskTextClass:d,maskTextSelector:p,skipChild:!1,inlineStylesheet:v,maskInputOptions:g,maskTextFn:S,maskInputFn:b,slimDOMOptions:C,recordCanvas:I,preserveWhiteSpace:P,onSerialize:T,onIframeLoad:x,iframeLoadTimeout:E,keepIframeSrcFn:R});n&&x(t,Y,n)}}),E)}return W}function D(e,t,n){var r={capture:!0,passive:!0};return n.addEventListener(e,t,r),function(){return n.removeEventListener(e,t,r)}}!function(e){e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin"}(y||(y={})),function(e){e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration"}(g||(g={})),function(e){e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel"}(S||(S={})),function(e){e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked"}(b||(b={})),function(e){e.Start="start",e.Pause="pause",e.Resume="resume",e.Resize="resize",e.Finish="finish",e.FullsnapshotRebuilded="fullsnapshot-rebuilded",e.LoadStylesheetStart="load-stylesheet-start",e.LoadStylesheetEnd="load-stylesheet-end",e.SkipStart="skip-start",e.SkipEnd="skip-end",e.MouseInteraction="mouse-interaction",e.EventCast="event-cast",e.CustomEvent="custom-event",e.Flush="flush",e.StateChange="state-change",e.PlayBack="play-back"}(C||(C={}));var R="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.",_={map:{},getId:function(){return console.error(R),-1},getNode:function(){return console.error(R),null},removeNodeFromMap:function(){console.error(R)},has:function(){return console.error(R),!1},reset:function(){console.error(R)}};function F(e,t,n){void 0===n&&(n={});var r=null,o=0;return function(a){var i=Date.now();o||!1!==n.leading||(o=i);var s=t-(i-o),l=this,u=arguments;s<=0||s>t?(r&&(clearTimeout(r),r=null),o=i,e.apply(l,u)):r||!1===n.trailing||(r=setTimeout((function(){o=!1===n.leading?0:Date.now(),r=null,e.apply(l,u)}),s))}}function L(e,t,n,r,o){void 0===o&&(o=window);var a=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set:function(e){var t=this;setTimeout((function(){n.set.call(t,e)}),0),a&&a.set&&a.set.call(this,e)}}),function(){return L(e,t,a||{},!0)}}function P(e,t,n){try{if(!(t in e))return function(){};var r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,function(){e[t]=r}}catch(e){return function(){}}}function A(){for(var e=window;e.parent&&e.parent!=e;)try{e.parent.document;e=e.parent}catch(e){break}return e}function z(){var e=A(),t=e.document;return e.innerHeight||t.documentElement&&t.documentElement.clientHeight||t.body&&t.body.clientHeight}function V(){var e=A(),t=e.document;return e.innerWidth||t.documentElement&&t.documentElement.clientWidth||t.body&&t.body.clientWidth}function W(e,t){if(!e)return!1;if(e.nodeType===e.ELEMENT_NODE){var n=!1;return"string"==typeof t?n=e.classList.contains(t):e.classList.forEach((function(e){t.test(e)&&(n=!0)})),n||W(e.parentNode,t)}return e.nodeType,e.TEXT_NODE,W(e.parentNode,t)}function H(e){return"__sn"in e&&e.__sn.id===u}function j(e,t){if(a(e))return!1;var n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||j(e.parentNode,t))}function B(e){return Boolean(e.changedTouches)}function U(t){return"__sn"in t&&(t.__sn.type===e.Element&&"iframe"===t.__sn.tagName)}function X(e){var t;return Boolean(null===(t=e)||void 0===t?void 0:t.shadowRoot)}function q(e){return"__ln"in e}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(_=new Proxy(_,{get:function(e,t,n){return"map"===t&&console.error(R),Reflect.get(e,t,n)}}));var G=function(){function e(){this.length=0,this.head=null}return e.prototype.get=function(e){if(e>=this.length)throw new Error("Position outside of list range");for(var t=this.head,n=0;n<e;n++)t=(null==t?void 0:t.next)||null;return t},e.prototype.addNode=function(e){var t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&q(e.previousSibling)){var n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&q(e.nextSibling)&&e.nextSibling.__ln.previous){n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;this.length++},e.prototype.removeNode=function(e){var t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next&&(t.next.previous=t.previous)):(this.head=t.next,this.head&&(this.head.previous=null)),e.__ln&&delete e.__ln,this.length--)},e}(),Y=function(e,t){return e+"@"+t};function K(e){return"__sn"in e}var $=function(){function e(){var e=this;this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=function(t){t.forEach(e.processMutation),e.emit()},this.emit=function(t){var r,o,i,s;if(!e.frozen&&!e.locked){void 0===t&&(t=Date.now());for(var l=[],c=new G,d=function(t){for(var n=t,r=u;r===u;)r=(n=n&&n.nextSibling)&&e.mirror.getId(n);return r},p=function(t){var n,r=t.getRootNode?null===(n=t.getRootNode())||void 0===n?void 0:n.host:null,o=!(e.doc.contains(t)||r instanceof Node&&e.doc.contains(r));if(t.parentNode&&!o){var i=a(t.parentNode)?e.mirror.getId(r):e.mirror.getId(t.parentNode);if(i!==u){var s=d(t);if(-1===i||-1===s)return c.addNode(t);var p=O(t,{doc:e.doc,map:e.mirror.map,blockClass:e.blockClass,blockSelector:e.blockSelector,maskTextClass:e.maskTextClass,maskTextSelector:e.maskTextSelector,skipChild:!0,inlineStylesheet:e.inlineStylesheet,maskInputOptions:e.maskInputOptions,maskTextFn:e.maskTextFn,maskInputFn:e.maskInputFn,slimDOMOptions:e.slimDOMOptions,recordCanvas:e.recordCanvas,onSerialize:function(n){U(n)&&e.iframeManager.addIframe(n),X(t)&&e.shadowDomManager.addShadowRoot(t.shadowRoot,document)},onIframeLoad:function(t,n,r){e.iframeManager.attachIframe(t,n,r)}});p&&l.push({parentId:i,nextId:s,node:p})}}};e.mapRemoves.length;)e.mirror.removeNodeFromMap(e.mapRemoves.shift());try{for(var f=n(e.movedSet),m=f.next();!m.done;m=f.next()){var h=m.value;Z(e.removes,h,e.mirror)&&!e.movedSet.has(h.parentNode)||p(h)}}catch(e){r={error:e}}finally{try{m&&!m.done&&(o=f.return)&&o.call(f)}finally{if(r)throw r.error}}try{for(var v=n(e.addedSet),y=v.next();!y.done;y=v.next()){h=y.value;Q(e.droppedSet,h)||Z(e.removes,h,e.mirror)?Q(e.movedSet,h)?p(h):e.droppedSet.add(h):p(h)}}catch(e){i={error:e}}finally{try{y&&!y.done&&(s=v.return)&&s.call(v)}finally{if(i)throw i.error}}for(var g=null;c.length;){var S=null;if(g){var b=e.mirror.getId(g.value.parentNode),C=d(g.value);-1!==b&&-1!==C&&(S=g)}if(!S)for(var k=c.length-1;k>=0;k--){var I=c.get(k);if(I){b=e.mirror.getId(I.value.parentNode),C=d(I.value);if(-1!==b&&-1!==C){S=I;break}}}if(!S){for(;c.head;)c.removeNode(c.head.value);break}g=S.previous,c.removeNode(S.value),p(S.value)}var T={texts:e.texts.map((function(t){return{id:e.mirror.getId(t.node),value:t.value}})).filter((function(t){return e.mirror.has(t.id)})),attributes:e.attributes.map((function(t){return{id:e.mirror.getId(t.node),attributes:t.attributes}})).filter((function(t){return e.mirror.has(t.id)})),removes:e.removes,adds:l};(T.texts.length||T.attributes.length||T.removes.length||T.adds.length)&&(e.texts=[],e.attributes=[],e.removes=[],e.addedSet=new Set,e.movedSet=new Set,e.droppedSet=new Set,e.movedMap={},e.emissionCallback(T,t))}},this.processMutation=function(t){var r,o,s,l;if(!H(t.target))switch(t.type){case"characterData":var u=t.target.textContent;W(t.target,e.blockClass)||u===t.oldValue||e.texts.push({value:E(t.target,e.maskTextClass,e.maskTextSelector)&&u?e.maskTextFn?e.maskTextFn(u):u.replace(/[\S]/g,"*"):u,node:t.target});break;case"attributes":var c=t.target;u=t.target.getAttribute(t.attributeName);if("value"===t.attributeName&&(u=i({maskInputOptions:e.maskInputOptions,tagName:t.target.tagName,type:t.target.getAttribute("type"),value:u,maskInputFn:e.maskInputFn})),W(t.target,e.blockClass)||u===t.oldValue)return;var d=e.attributes.find((function(e){return e.node===t.target}));if(d||(d={node:t.target,attributes:{}},e.attributes.push(d)),"style"===t.attributeName){var p=e.doc.createElement("span");t.oldValue&&p.setAttribute("style",t.oldValue),void 0!==d.attributes.style&&null!==d.attributes.style||(d.attributes.style={});var f=d.attributes.style;try{for(var m=n(Array.from(c.style)),h=m.next();!h.done;h=m.next()){var v=h.value,y=c.style.getPropertyValue(v),g=c.style.getPropertyPriority(v);y===p.style.getPropertyValue(v)&&g===p.style.getPropertyPriority(v)||(f[v]=""===g?y:[y,g])}}catch(e){r={error:e}}finally{try{h&&!h.done&&(o=m.return)&&o.call(m)}finally{if(r)throw r.error}}try{for(var S=n(Array.from(p.style)),b=S.next();!b.done;b=S.next()){v=b.value;""!==c.style.getPropertyValue(v)&&c.style.getPropertyValue(v)||(f[v]=!1)}}catch(e){s={error:e}}finally{try{b&&!b.done&&(l=S.return)&&l.call(S)}finally{if(s)throw s.error}}}else d.attributes[t.attributeName]=w(e.doc,t.target.tagName,t.attributeName,u);break;case"childList":t.addedNodes.forEach((function(n){return e.genAdds(n,t.target)})),t.removedNodes.forEach((function(n){var r=e.mirror.getId(n),o=a(t.target)?e.mirror.getId(t.target.host):e.mirror.getId(t.target);W(t.target,e.blockClass)||H(n)||(e.addedSet.has(n)?(J(e.addedSet,n),e.droppedSet.add(n)):e.addedSet.has(t.target)&&-1===r||j(t.target,e.mirror)||(e.movedSet.has(n)&&e.movedMap[Y(r,o)]?J(e.movedSet,n):e.removes.push({parentId:o,id:r,isShadow:!!a(t.target)||void 0})),e.mapRemoves.push(n))}))}},this.genAdds=function(t,n){if(!n||!W(n,e.blockClass)){if(K(t)){if(H(t))return;e.movedSet.add(t);var r=null;n&&K(n)&&(r=n.__sn.id),r&&(e.movedMap[Y(t.__sn.id,r)]=!0)}else e.addedSet.add(t),e.droppedSet.delete(t);W(t,e.blockClass)||t.childNodes.forEach((function(t){return e.genAdds(t)}))}}}return e.prototype.init=function(e,t,n,r,o,a,i,s,l,u,c,d,p,f,m){this.blockClass=t,this.blockSelector=n,this.maskTextClass=r,this.maskTextSelector=o,this.inlineStylesheet=a,this.maskInputOptions=i,this.maskTextFn=s,this.maskInputFn=l,this.recordCanvas=u,this.slimDOMOptions=c,this.emissionCallback=e,this.doc=d,this.mirror=p,this.iframeManager=f,this.shadowDomManager=m},e.prototype.freeze=function(){this.frozen=!0},e.prototype.unfreeze=function(e){this.frozen=!1,this.emit(e)},e.prototype.isFrozen=function(){return this.frozen},e.prototype.lock=function(){this.locked=!0},e.prototype.unlock=function(){this.locked=!1,this.emit()},e}();function J(e,t){e.delete(t),t.childNodes.forEach((function(t){return J(e,t)}))}function Z(e,t,n){var r=t.parentNode;if(!r)return!1;var o=n.getId(r);return!!e.some((function(e){return e.id===o}))||Z(e,r,n)}function Q(e,t){var n=t.parentNode;return!!n&&(!!e.has(n)||Q(e,n))}var ee=[],te=null,ne="undefined"!=typeof CSSGroupingRule,re="undefined"!=typeof CSSMediaRule,oe="undefined"!=typeof CSSSupportsRule,ae="undefined"!=typeof CSSConditionRule;function ie(e){try{if("composedPath"in e){var t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0];return e.target}catch(t){return e.target}}function se(e,t,n,r,o,a,i,s,l,u,c,d,p,f,m,h){var v,y,g,S=new $;ee.push(S),S.init(e,n,r,o,a,i,s,l,u,c,d,t,p,f,m);var b=window.MutationObserver||window.__rrMutationObserver,C=null===(g=null===(y=null===(v=window)||void 0===v?void 0:v.Zone)||void 0===y?void 0:y.__symbol__)||void 0===g?void 0:g.call(y,"MutationObserver");C&&window[C]&&(b=window[C]);var k=new b(S.processMutations.bind(S));return k.observe(h,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),k}function le(e,n,r,o,a){if(!1===a.mouseInteraction)return function(){};var i=!0===a.mouseInteraction||void 0===a.mouseInteraction?{}:a.mouseInteraction,s=[];return Object.keys(S).filter((function(e){return Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==i[e]})).forEach((function(a){var i=a.toLowerCase(),l=function(n){return function(a){var i=ie(a);if(!W(i,o)){var s=B(a)?a.changedTouches[0]:a;if(s){var l=r.getId(i),u=s.clientX,c=s.clientY,d={type:S[n],id:l,x:u,y:c},p=i;if(S[n]===S.Click){var f=null;("a"===p.tagName.toLowerCase()&&p.href||"area"===p.tagName.toLowerCase()&&p.href)&&(f=p.href),null!==f&&(d=t(t({},d),{href:f}))}e(d)}}}}(a);s.push(D(i,l,n))})),function(){s.forEach((function(e){return e()}))}}function ue(e,t,n,r,o){return D("scroll",F((function(o){var a=ie(o);if(a&&!W(a,r)){var i=n.getId(a);if(a===t){var s=t.scrollingElement||t.documentElement;e({id:i,x:s.scrollLeft,y:s.scrollTop})}else e({id:i,x:a.scrollLeft,y:a.scrollTop})}}),o.scroll||100),t)}function ce(e,n){var r=t({},e);return n||delete r.userTriggered,r}var de=["INPUT","TEXTAREA","SELECT"],pe=new WeakMap;function fe(e){return function(e,t){if(ne&&e.parentRule instanceof CSSGroupingRule||re&&e.parentRule instanceof CSSMediaRule||oe&&e.parentRule instanceof CSSSupportsRule||ae&&e.parentRule instanceof CSSConditionRule){var n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else{n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function me(e,a){var s,l;void 0===a&&(a={});var u=e.doc.defaultView;if(!u)return function(){};!function(e,t){var n=e.mutationCb,r=e.mousemoveCb,a=e.mouseInteractionCb,i=e.scrollCb,s=e.viewportResizeCb,l=e.inputCb,u=e.mediaInteractionCb,c=e.styleSheetRuleCb,d=e.styleDeclarationCb,p=e.canvasMutationCb,f=e.fontCb;e.mutationCb=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.mutation&&t.mutation.apply(t,o(e)),n.apply(void 0,o(e))},e.mousemoveCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.mousemove&&t.mousemove.apply(t,o(e)),r.apply(void 0,o(e))},e.mouseInteractionCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.mouseInteraction&&t.mouseInteraction.apply(t,o(e)),a.apply(void 0,o(e))},e.scrollCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.scroll&&t.scroll.apply(t,o(e)),i.apply(void 0,o(e))},e.viewportResizeCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.viewportResize&&t.viewportResize.apply(t,o(e)),s.apply(void 0,o(e))},e.inputCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.input&&t.input.apply(t,o(e)),l.apply(void 0,o(e))},e.mediaInteractionCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.mediaInteaction&&t.mediaInteaction.apply(t,o(e)),u.apply(void 0,o(e))},e.styleSheetRuleCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.styleSheetRule&&t.styleSheetRule.apply(t,o(e)),c.apply(void 0,o(e))},e.styleDeclarationCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.styleDeclaration&&t.styleDeclaration.apply(t,o(e)),d.apply(void 0,o(e))},e.canvasMutationCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.canvasMutation&&t.canvasMutation.apply(t,o(e)),p.apply(void 0,o(e))},e.fontCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.font&&t.font.apply(t,o(e)),f.apply(void 0,o(e))}}(e,a);var c,d,p,f=se(e.mutationCb,e.doc,e.blockClass,e.blockSelector,e.maskTextClass,e.maskTextSelector,e.inlineStylesheet,e.maskInputOptions,e.maskTextFn,e.maskInputFn,e.recordCanvas,e.slimDOMOptions,e.mirror,e.iframeManager,e.shadowDomManager,e.doc),m=function(e,t,n,r){if(!1===t.mousemove)return function(){};var o,a,i="number"==typeof t.mousemove?t.mousemove:50,s="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500,l=[];function u(t){if(l.length){te=null;var n=t-o;e(l.map((function(e){return e.timeOffset-=n,e})),a,t),l=[],o=null}}var c=F(u,s),d=F((function(e){var t=ie(e),n=B(e)?e.changedTouches[0]:e,i=n.clientX,s=n.clientY;o||(o=Date.now()),l.push({x:i,y:s,id:r.getId(t),timeOffset:Date.now()-o}),a="undefined"!=typeof DragEvent&&e instanceof DragEvent?g.Drag:e instanceof MouseEvent?g.MouseMove:g.TouchMove,te=u,c(Date.now())}),i,{trailing:!1}),p=[D("mousemove",d,n),D("touchmove",d,n),D("drag",d,n)];return function(){p.forEach((function(e){return e()}))}}(e.mousemoveCb,e.sampling,e.doc,e.mirror),h=le(e.mouseInteractionCb,e.doc,e.mirror,e.blockClass,e.sampling),v=ue(e.scrollCb,e.doc,e.mirror,e.blockClass,e.sampling),y=(c=e.viewportResizeCb,d=-1,p=-1,D("resize",F((function(){var e=z(),t=V();d===e&&p===t||(c({width:Number(t),height:Number(e)}),d=e,p=t)}),200),window)),S=function(e,n,r,a,s,l,u,c,d){function p(e){var t=ie(e),r=e.isTrusted;if(t&&t.tagName&&!(de.indexOf(t.tagName)<0)&&!W(t,a)){var o=t.type;if(!t.classList.contains(s)){var c=t.value,p=!1;"radio"===o||"checkbox"===o?p=t.checked:(l[t.tagName.toLowerCase()]||l[o])&&(c=i({maskInputOptions:l,tagName:t.tagName,type:o,value:c,maskInputFn:u})),f(t,ce({text:c,isChecked:p,userTriggered:r},d));var m=t.name;"radio"===o&&m&&p&&n.querySelectorAll('input[type="radio"][name="'+m+'"]').forEach((function(e){e!==t&&f(e,ce({text:e.value,isChecked:!p,userTriggered:!1},d))}))}}}function f(n,o){var a=pe.get(n);if(!a||a.text!==o.text||a.isChecked!==o.isChecked){pe.set(n,o);var i=r.getId(n);e(t(t({},o),{id:i}))}}var m=("last"===c.input?["change"]:["input","change"]).map((function(e){return D(e,p,n)})),h=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"),v=[[HTMLInputElement.prototype,"value"],[HTMLInputElement.prototype,"checked"],[HTMLSelectElement.prototype,"value"],[HTMLTextAreaElement.prototype,"value"],[HTMLSelectElement.prototype,"selectedIndex"]];return h&&h.set&&m.push.apply(m,o(v.map((function(e){return L(e[0],e[1],{set:function(){p({target:this})}})})))),function(){m.forEach((function(e){return e()}))}}(e.inputCb,e.doc,e.mirror,e.blockClass,e.ignoreClass,e.maskInputOptions,e.maskInputFn,e.sampling,e.userTriggeredOnInput),C=function(e,t,n,r){var o=function(t){return function(o){var a=ie(o);a&&!W(a,r)&&e({type:t,id:n.getId(a),currentTime:a.currentTime})}},a=[D("play",o(b.Play),t),D("pause",o(b.Pause),t),D("seeked",o(b.Seeked),t)];return function(){a.forEach((function(e){return e()}))}}(e.mediaInteractionCb,e.doc,e.mirror,e.blockClass),k=function(e,t,n){var a=t.CSSStyleSheet.prototype.insertRule;t.CSSStyleSheet.prototype.insertRule=function(t,r){var o=n.getId(this.ownerNode);return-1!==o&&e({id:o,adds:[{rule:t,index:r}]}),a.apply(this,arguments)};var i=t.CSSStyleSheet.prototype.deleteRule;t.CSSStyleSheet.prototype.deleteRule=function(t){var r=n.getId(this.ownerNode);return-1!==r&&e({id:r,removes:[{index:t}]}),i.apply(this,arguments)};var s={};ne?s.CSSGroupingRule=t.CSSGroupingRule:(re&&(s.CSSMediaRule=t.CSSMediaRule),ae&&(s.CSSConditionRule=t.CSSConditionRule),oe&&(s.CSSSupportsRule=t.CSSSupportsRule));var l={};return Object.entries(s).forEach((function(t){var a=r(t,2),i=a[0],s=a[1];l[i]={insertRule:s.prototype.insertRule,deleteRule:s.prototype.deleteRule},s.prototype.insertRule=function(t,r){var a=n.getId(this.parentStyleSheet.ownerNode);return-1!==a&&e({id:a,adds:[{rule:t,index:o(fe(this),[r||0])}]}),l[i].insertRule.apply(this,arguments)},s.prototype.deleteRule=function(t){var r=n.getId(this.parentStyleSheet.ownerNode);return-1!==r&&e({id:r,removes:[{index:o(fe(this),[t])}]}),l[i].deleteRule.apply(this,arguments)}})),function(){t.CSSStyleSheet.prototype.insertRule=a,t.CSSStyleSheet.prototype.deleteRule=i,Object.entries(s).forEach((function(e){var t=r(e,2),n=t[0],o=t[1];o.prototype.insertRule=l[n].insertRule,o.prototype.deleteRule=l[n].deleteRule}))}}(e.styleSheetRuleCb,u,e.mirror),I=function(e,t,n){var r=t.CSSStyleDeclaration.prototype.setProperty;t.CSSStyleDeclaration.prototype.setProperty=function(t,o,a){var i,s,l=n.getId(null===(s=null===(i=this.parentRule)||void 0===i?void 0:i.parentStyleSheet)||void 0===s?void 0:s.ownerNode);return-1!==l&&e({id:l,set:{property:t,value:o,priority:a},index:fe(this.parentRule)}),r.apply(this,arguments)};var o=t.CSSStyleDeclaration.prototype.removeProperty;return t.CSSStyleDeclaration.prototype.removeProperty=function(t){var r,a,i=n.getId(null===(a=null===(r=this.parentRule)||void 0===r?void 0:r.parentStyleSheet)||void 0===a?void 0:a.ownerNode);return-1!==i&&e({id:i,remove:{property:t},index:fe(this.parentRule)}),o.apply(this,arguments)},function(){t.CSSStyleDeclaration.prototype.setProperty=r,t.CSSStyleDeclaration.prototype.removeProperty=o}}(e.styleDeclarationCb,u,e.mirror),T=e.recordCanvas?function(e,t,r,a){var i,s,l=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype),u=[],c=function(n){try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[n])return"continue";var i=P(t.CanvasRenderingContext2D.prototype,n,(function(t){return function(){for(var i=this,s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];return W(this.canvas,r)||setTimeout((function(){var t=o(s);if("drawImage"===n&&t[0]&&t[0]instanceof HTMLCanvasElement){var r=t[0],l=r.getContext("2d"),u=null==l?void 0:l.getImageData(0,0,r.width,r.height),c=null==u?void 0:u.data;t[0]=JSON.stringify(c)}e({id:a.getId(i.canvas),property:n,args:t})}),0),t.apply(this,s)}}));u.push(i)}catch(r){var s=L(t.CanvasRenderingContext2D.prototype,n,{set:function(t){e({id:a.getId(this.canvas),property:n,args:[t],setter:!0})}});u.push(s)}};try{for(var d=n(l),p=d.next();!p.done;p=d.next())c(p.value)}catch(e){i={error:e}}finally{try{p&&!p.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}return function(){u.forEach((function(e){return e()}))}}(e.canvasMutationCb,u,e.blockClass,e.mirror):function(){},x=e.collectFonts?function(e,t){var n=t.defaultView;if(!n)return function(){};var r=[],o=new WeakMap,a=n.FontFace;n.FontFace=function(e,t,n){var r=new a(e,t,n);return o.set(r,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r};var i=P(t.fonts,"add",(function(t){return function(n){return setTimeout((function(){var t=o.get(n);t&&(e(t),o.delete(n))}),0),t.apply(this,[n])}}));return r.push((function(){n.FontFace=a})),r.push(i),function(){r.forEach((function(e){return e()}))}}(e.fontCb,e.doc):function(){},w=[];try{for(var E=n(e.plugins),M=E.next();!M.done;M=E.next()){var N=M.value;w.push(N.observer(N.callback,u,N.options))}}catch(e){s={error:e}}finally{try{M&&!M.done&&(l=E.return)&&l.call(E)}finally{if(s)throw s.error}}return function(){f.disconnect(),m(),h(),v(),y(),S(),C(),k(),I(),T(),x(),w.forEach((function(e){return e()}))}}var he,ve,ye,ge=function(){function e(e){this.iframes=new WeakMap,this.mutationCb=e.mutationCb}return e.prototype.addIframe=function(e){this.iframes.set(e,!0)},e.prototype.addLoadListener=function(e){this.loadListener=e},e.prototype.attachIframe=function(e,t,n){var r;this.mutationCb({adds:[{parentId:t,nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),null===(r=this.loadListener)||void 0===r||r.call(this,e)},e}(),Se=function(){function e(e){this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror}return e.prototype.addShadowRoot=function(e,t){se(this.mutationCb,t,this.bypassOptions.blockClass,this.bypassOptions.blockSelector,this.bypassOptions.maskTextClass,this.bypassOptions.maskTextSelector,this.bypassOptions.inlineStylesheet,this.bypassOptions.maskInputOptions,this.bypassOptions.maskTextFn,this.bypassOptions.maskInputFn,this.bypassOptions.recordCanvas,this.bypassOptions.slimDOMOptions,this.mirror,this.bypassOptions.iframeManager,this,e),ue(this.scrollCb,e,this.mirror,this.bypassOptions.blockClass,this.bypassOptions.sampling)},e}();function be(e){return"timestamp"in e?e:t(t({},e),{timestamp:Date.now()})}var Ce={map:{},getId:function(e){return e&&e.__sn?e.__sn.id:-1},getNode:function(e){return this.map[e]||null},removeNodeFromMap:function(e){var t=this,n=e.__sn&&e.__sn.id;delete this.map[n],e.childNodes&&e.childNodes.forEach((function(e){return t.removeNodeFromMap(e)}))},has:function(e){return this.map.hasOwnProperty(e)},reset:function(){this.map={}}};function ke(e){void 0===e&&(e={});var n=e.emit,o=e.checkoutEveryNms,a=e.checkoutEveryNth,i=e.blockClass,l=void 0===i?"rr-block":i,u=e.blockSelector,c=void 0===u?null:u,d=e.ignoreClass,p=void 0===d?"rr-ignore":d,f=e.maskTextClass,m=void 0===f?"rr-mask":f,h=e.maskTextSelector,v=void 0===h?null:h,S=e.inlineStylesheet,b=void 0===S||S,C=e.maskAllInputs,k=e.maskInputOptions,I=e.slimDOMOptions,T=e.maskInputFn,x=e.maskTextFn,w=e.hooks,E=e.packFn,M=e.sampling,N=void 0===M?{}:M,R=e.mousemoveWait,_=e.recordCanvas,F=void 0!==_&&_,L=e.userTriggeredOnInput,P=void 0!==L&&L,W=e.collectFonts,H=void 0!==W&&W,j=e.plugins,B=e.keepIframeSrcFn,q=void 0===B?function(){return!1}:B;if(!n)throw new Error("emit function is required");var G=A(),Y=G.document;void 0!==R&&void 0===N.mousemove&&(N.mousemove=R);var K,$,J=!0===C?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==k?k:{password:!0},Z=!0===I||"all"===I?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===I,headMetaDescKeywords:"all"===I,adPlaceholder:"all"===I}:I||{};void 0===K&&(K=window),"NodeList"in K&&!K.NodeList.prototype.forEach&&(K.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in K&&!K.DOMTokenList.prototype.forEach&&(K.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=function(e){if(!(0 in arguments))throw new TypeError("1 argument is required");do{if(this===e)return!0}while(e=e&&e.parentNode);return!1});var Q=0;he=function(e,t){var r;if(te&&te(e.timestamp),(null===(r=ee[0])||void 0===r?void 0:r.isFrozen())&&e.type!==y.FullSnapshot&&(e.type!==y.IncrementalSnapshot||e.data.source!==g.Mutation)){var i=e.timestamp;"positions"in e.data&&e.data.positions[0].timeOffset&&(i+=e.data.positions[0].timeOffset),ee.forEach((function(e){return e.unfreeze(i)}))}if(n(E?E(e):e,t),e.type===y.FullSnapshot)$=e,Q=0;else if(e.type===y.IncrementalSnapshot){if(e.data.source===g.Mutation&&e.data.isAttachIframe)return;Q++;var s=a&&Q>=a,l=o&&e.timestamp-$.timestamp>o;(s||l)&&ye(!0)}};var ne=function(e,n){var r={type:y.IncrementalSnapshot,data:t({source:g.Mutation},e)};he(be(void 0!==n?t({timestamp:n},r):r))},re=function(e){return he(be({type:y.IncrementalSnapshot,data:t({source:g.Scroll},e)}))},oe=new ge({mutationCb:ne}),ae=new Se({mutationCb:ne,scrollCb:re,bypassOptions:{blockClass:l,blockSelector:c,maskTextClass:m,maskTextSelector:v,inlineStylesheet:b,maskInputOptions:J,maskTextFn:x,maskInputFn:T,recordCanvas:F,sampling:N,slimDOMOptions:Z,iframeManager:oe},mirror:Ce});ye=function(e){var t,n,o,a;void 0===e&&(e=!1),he(be({type:y.Meta,data:{href:G.location.href,width:V(),height:z(),devicePixelRatio:window.devicePixelRatio}}),e),ee.forEach((function(e){return e.lock()}));var i=r(function(e,t){var n=t||{},r=n.blockClass,o=void 0===r?"rr-block":r,a=n.blockSelector,i=void 0===a?null:a,s=n.maskTextClass,l=void 0===s?"rr-mask":s,u=n.maskTextSelector,c=void 0===u?null:u,d=n.inlineStylesheet,p=void 0===d||d,f=n.recordCanvas,m=void 0!==f&&f,h=n.maskAllInputs,v=void 0!==h&&h,y=n.maskTextFn,g=n.maskInputFn,S=n.slimDOM,b=void 0!==S&&S,C=n.preserveWhiteSpace,k=n.onSerialize,I=n.onIframeLoad,T=n.iframeLoadTimeout,x=n.keepIframeSrcFn,w={};return[O(e,{doc:e,map:w,blockClass:o,blockSelector:i,maskTextClass:l,maskTextSelector:c,skipChild:!1,ignoreChildren:!1,inlineStylesheet:p,maskInputOptions:!0===v?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===v?{password:!0}:v,maskTextFn:y,maskInputFn:g,slimDOMOptions:!0===b||"all"===b?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===b,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0,adPlaceholder:"all"===b}:!1===b?{}:b,recordCanvas:m,preserveWhiteSpace:C,onSerialize:k,onIframeLoad:I,iframeLoadTimeout:T,keepIframeSrcFn:void 0===x?function(){return!1}:x,isFullSnapshot:!0}),w]}(Y,{blockClass:l,blockSelector:c,maskTextClass:m,maskTextSelector:v,inlineStylesheet:b,maskAllInputs:J,maskTextFn:x,slimDOM:Z,recordCanvas:F,onSerialize:function(e){U(e)&&oe.addIframe(e),X(e)&&ae.addShadowRoot(e.shadowRoot,Y)},onIframeLoad:function(e,t,n){oe.attachIframe(e,t,n)},keepIframeSrcFn:q}),2),s=i[0],u=i[1];if(!s)return console.warn("Failed to snapshot the document");Ce.map=u,he(be({type:y.FullSnapshot,data:{node:s,initialOffset:{left:void 0!==G.pageXOffset?G.pageXOffset:(null==Y?void 0:Y.documentElement.scrollLeft)||(null===(n=null===(t=null==Y?void 0:Y.body)||void 0===t?void 0:t.parentElement)||void 0===n?void 0:n.scrollLeft)||(null==Y?void 0:Y.body.scrollLeft)||0,top:void 0!==G.pageYOffset?G.pageYOffset:(null==Y?void 0:Y.documentElement.scrollTop)||(null===(a=null===(o=null==Y?void 0:Y.body)||void 0===o?void 0:o.parentElement)||void 0===a?void 0:a.scrollTop)||(null==Y?void 0:Y.body.scrollTop)||0}}})),ee.forEach((function(e){return e.unlock()}))};try{var ie=[];ie.push(D("DOMContentLoaded",(function(){he(be({type:y.DomContentLoaded,data:{}}))}),Y));var se=function(e){return me({mutationCb:ne,mousemoveCb:function(e,t,n){return he(be({type:y.IncrementalSnapshot,data:{source:t,positions:e},timestamp:n}))},mouseInteractionCb:function(e){return he(be({type:y.IncrementalSnapshot,data:t({source:g.MouseInteraction},e)}))},scrollCb:re,viewportResizeCb:function(e){return he(be({type:y.IncrementalSnapshot,data:t({source:g.ViewportResize},e)}))},inputCb:function(e){return he(be({type:y.IncrementalSnapshot,data:t({source:g.Input},e)}))},mediaInteractionCb:function(e){return he(be({type:y.IncrementalSnapshot,data:t({source:g.MediaInteraction},e)}))},styleSheetRuleCb:function(e){return he(be({type:y.IncrementalSnapshot,data:t({source:g.StyleSheetRule},e)}))},styleDeclarationCb:function(e){return he(be({type:y.IncrementalSnapshot,data:t({source:g.StyleDeclaration},e)}))},canvasMutationCb:function(e){return he(be({type:y.IncrementalSnapshot,data:t({source:g.CanvasMutation},e)}))},fontCb:function(e){return he(be({type:y.IncrementalSnapshot,data:t({source:g.Font},e)}))},blockClass:l,ignoreClass:p,maskTextClass:m,maskTextSelector:v,maskInputOptions:J,inlineStylesheet:b,sampling:N,recordCanvas:F,userTriggeredOnInput:P,collectFonts:H,doc:e,maskInputFn:T,maskTextFn:x,blockSelector:c,slimDOMOptions:Z,mirror:Ce,iframeManager:oe,shadowDomManager:ae,plugins:(null==j?void 0:j.map((function(e){return{observer:e.observer,options:e.options,callback:function(t){return he(be({type:y.Plugin,data:{plugin:e.name,payload:t}}))}}})))||[]},w)};oe.addLoadListener((function(e){ie.push(se(e.contentDocument))}));var le=function(){ye(),ie.push(se(Y))};return"interactive"===Y.readyState||"complete"===Y.readyState?le():ie.push(D("load",(function(){he(be({type:y.Load,data:{}})),le()}),G)),ve=function(e){if(ie.forEach((function(e){return e()})),e){var t=void 0;for(t in Ce.map)delete Ce.map[t].__sn;s=1}}}catch(e){console.warn(e)}}return ke.addCustomEvent=function(e,t){if(!he)throw new Error("please add custom event after start recording");he(be({type:y.Custom,data:{tag:e,payload:t}}))},ke.freezePage=function(){ee.forEach((function(e){return e.freeze()}))},ke.takeFullSnapshot=function(e){if(!ye)throw new Error("please take full snapshot after start recording");ye(e)},ke.stop=function(e){void 0===e&&(e=!0),ve(e)},ke.mirror=Ce,ke}();

